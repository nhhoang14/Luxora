{% load static %}
{% load vn_currency %}

<div class="w-full flex-col aspect-[3/4] bg-transition group"> <!-- thay đổi ở đây: w-full -->
    <!-- Ảnh sản phẩm -->
    <div class="relative w-full aspect-square rounded-2xl overflow-hidden">
        <a href="{% url 'products:detail' product.slug %}">
            {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover" />
            {% else %}
            <img src="{% static 'core/images/default-category.jpg' %}" alt="{{ product.name }}"
                class="w-full h-full object-cover" />
            {% endif %}
        </a>
        <!-- Icon Quick View -->
        <button hx-get="{% url 'quick_view' product.pk %}" hx-target="#quickview-container" hx-swap="innerHTML"
            class="absolute top-2 right-2 z-10 bg-white/80 hover:bg-black hover:text-white text-gray-600 rounded-full w-10 h-10 flex items-center justify-center
                   opacity-0 group-hover:opacity-100 cursor-pointer duration-300" title="Xem nhanh"
            onclick="event.stopPropagation(); event.preventDefault();">
            <span class="material-symbols-outlined text-lg">visibility</span>
        </button>
    </div>
    <!-- Thông tin sản phẩm -->
    <div class="py-4 flex-1 flex flex-col justify-between">
        <span class="text-gray-400 text-xs uppercase mb-1">LUXORA</span>
        <h3 class="font-semibold text-lg mb-1">
            <a href="{% url 'products:detail' product.slug %}" class="cursor-pointer">{{ product.name }}</a>
        </h3>
        <p class="text-gray-600 font-medium">{{ product.price|vnd }} VND</p>
        {% if product.colors.all %}
        <div class="flex flex-wrap gap-2 mt-3">
            {% for color in product.colors.all %}
            <span class="w-5 h-5 rounded-full border border-gray-300 shadow-sm"
                style="background-color: {{ color.hex_code }};"></span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>