{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>{% block title %}Luxora{% endblock %}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    {% tailwind_css %}
</head>

<body class="bg-gray-50 text-black font-[Plus Jakarta Sans]">

    <!-- Drawer wrapper -->
    <div class="drawer drawer-end z-50 min-h-screen">

        <!-- Drawer toggle -->
        <input id="cart-drawer" type="checkbox" class="drawer-toggle" />

        <!-- Page content -->
        <div class="drawer-content flex flex-col">

            <!-- Navbar -->
            {% include "partials/navbar.html" %}

            <!-- Main content -->
            <main class="w-full py-20 flex-1">
                {% block content %}{% endblock %}
            </main>

            <!-- Footer -->
            {% include 'partials/footer.html' %}
        </div>

        <!-- Quick View Modal -->
        <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 justify-center items-center z-[70]"
            hx-target="this" hx-swap="outerHTML"
            _="on click if event.target is me add .hidden to me then remove .flex from me">
            <div id="modal-content" class="bg-white rounded-2xl p-6 max-w-lg w-[90%]"></div>
        </div>

        <!-- Drawer side -->
        {% include "partials/drawer.html" %}

    </div>

    <!-- Quick View Modal -->
    <div id="modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-[60]">
        <div id="modal-content" class="bg-white p-6 rounded-2xl shadow-lg max-w-lg w-full relative">
            <!-- nội dung Quick View sẽ được load ở đây -->
        </div>
    </div>

    <script>
        // Khi HTMX load nội dung vào modal-content
        document.body.addEventListener('htmx:afterSwap', (e) => {
            if (e.detail.target.id === "modal-content") {
                document.getElementById("modal").classList.remove("hidden");
            }
        });

        // Click ra ngoài để đóng modal
        document.getElementById("modal").addEventListener("click", (e) => {
            if (e.target.id === "modal") {
                e.target.classList.add("hidden");
                document.getElementById("modal-content").innerHTML = "";
            }
        });
    </script>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
</body>

</html>