{% load vn_currency %}
<div id="cart-tab" class="fixed inset-0 bg-white flex flex-col">

  {% if cart.items.all %}
    <!-- Phần trên: Tiêu đề + danh sách sản phẩm -->
    <div class="flex-1 flex flex-col overflow-hidden">
      
      <!-- Tiêu đề -->
      <div class="text-left pt-8 pb-6 px-10 flex items-center gap-2 border-b border-gray-200">
        <h2 class="text-xl font-normal tracking-tight text-black">Giỏ hàng</h2>
        <span class="bg-black text-white font-semibold rounded-full h-6 w-6 flex items-center justify-center text-xs">
          {{ cart.items.count }}
        </span>
      </div>
      
      <!-- Danh sách sản phẩm có thể cuộn -->
      <div class="flex-1 overflow-y-auto px-10 py-6 space-y-6">
        {% for item in cart.items.all %}
          {% include 'cart/partials/cart_item.html' with item=item %}
        {% endfor %}
      </div>
    </div>

    <!-- Footer cố định (tách khỏi cột trên hoàn toàn) -->
    <div class="border-t border-gray-200 bg-white px-10 py-8 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]">
      <!-- Tổng cộng -->
      <div class="flex justify-between items-center text-lg font-bold text-[#333] mb-6">
        <span>Tổng cộng</span>
        <span>{{ cart.total_price|vnd }} VND</span>
      </div>

      <!-- Hai nút nằm NGANG -->
      <div class="flex gap-4">
        <!-- Nút Xem giỏ hàng -->
        <a href="{% url 'cart:cart' %}" 
           class="flex-1 flex items-center justify-center bg-[#FF5532] text-white text-base font-medium 
                  rounded-full py-4 hover:opacity-80 duration-300">
          Xem giỏ hàng
        </a>

        <!-- Nút Thanh toán -->
        <a href="{% url 'products:list' %}" 
           class="flex-1 flex items-center justify-center bg-black text-white text-base font-medium 
                  rounded-full py-4 hover:opacity-80 duration-300 gap-2">
          <span class="material-symbols-outlined text-lg">lock</span>
          <span>Thanh toán</span>
        </a>
      </div>
    </div>

  {% else %}
   <!-- Giỏ hàng đang trống -->
  <div class="flex flex-col items-center justify-center space-y-6 h-full">
    <span class="relative">
      <span class="material-symbols-outlined" style="font-size: 3rem;">
        shopping_basket
      </span>
      <span
        class="absolute top-1 -right-2 bg-black text-white rounded-full h-6 w-6 flex items-center justify-center text-xs leading-none">
        0
      </span>
    </span>
    <p class="text-center text-gray-500 text-xl">Giỏ hàng đang trống</p>
    <a href="{% url 'products:list' %}"
      class="bg-black hover:opacity-80 text-white text-base px-8 py-5 duration-300 rounded-full cursor-pointer">
      Tiếp tục mua sắm
    </a>
  </div>
{% endif %}
</div>
